# =============================================================================
# RSVP Reader Environment Configuration
# =============================================================================
# Copy this file to .env.local and fill in your values
# NEVER commit .env.local to git - it contains secrets!

# -----------------------------------------------------------------------------
# Supabase Configuration (Production)
# -----------------------------------------------------------------------------
# Get these from: https://supabase.com/dashboard/project/_/settings/api
#
# Public keys (safe to expose in client-side code):
NEXT_PUBLIC_SUPABASE_URL=your-project-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# Secret key for server-side admin operations (NEVER expose to client):
# Use the NEW secret key format (sb_secret_...) which supports rotation.
# Generate at: https://supabase.com/dashboard/project/_/settings/api-keys/new
# See: https://github.com/orgs/supabase/discussions/29260
SUPABASE_SECRET_KEY=your-secret-key

# DEPRECATED: Legacy service_role key (still works but cannot be rotated)
# Only use if you haven't migrated to the new secret key format yet.
# SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# -----------------------------------------------------------------------------
# Test Environment (IMPORTANT: Use separate Supabase project for testing!)
# -----------------------------------------------------------------------------
# Option 1: Supabase Local Development (RECOMMENDED - use .env.test file)
#   1. Run: npx supabase start
#   2. Copy .env.test.example to .env.test (already configured with local keys)
#   3. Update READWISE_ACCESS_TOKEN in .env.test with a TEST account token
#
# Standard local Supabase credentials (same for all developers):
#   NEXT_PUBLIC_SUPABASE_URL=http://127.0.0.1:54321
#   NEXT_PUBLIC_SUPABASE_ANON_KEY=sb_publishable_ACJWlzQHlZjBrEguHvfOxg_3BJgxAaH
#   SUPABASE_SECRET_KEY=sb_secret_N7UND0UgjKTVK-Uodkm0Hg_xSvEMPvz

# Option 2: Separate Supabase Test Project (not recommended - costs money)
#TEST_SUPABASE_URL=https://your-test-project.supabase.co
#TEST_SUPABASE_ANON_KEY=your-test-anon-key
#TEST_SUPABASE_SECRET_KEY=your-test-secret-key

# -----------------------------------------------------------------------------
# Readwise Reader API
# -----------------------------------------------------------------------------
# Get token from: https://readwise.io/access_token
# WARNING: Use a TEST account token for integration tests!
# Do NOT use your production Readwise account for testing.
READWISE_ACCESS_TOKEN=your-readwise-token

# -----------------------------------------------------------------------------
# Sync API Protection
# -----------------------------------------------------------------------------
# Used to protect the /api/sync/readwise endpoint from unauthorized access
# Generate a secure random key:
#   openssl rand -hex 32
# Or:
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SYNC_API_KEY=generate-random-secret-key-here

# -----------------------------------------------------------------------------
# Optional: Rate Limiting Configuration
# -----------------------------------------------------------------------------
# These settings control API rate limiting to prevent abuse
RATE_LIMIT_WINDOW_MS=60000        # 1 minute window
RATE_LIMIT_MAX_REQUESTS=100       # Max requests per window

# -----------------------------------------------------------------------------
# Encryption Key (REQUIRED for production)
# -----------------------------------------------------------------------------
# Used to encrypt sensitive tokens in the database (Readwise tokens, LLM API keys)
# Generate a secure 256-bit key:
#   openssl rand -base64 32
ENCRYPTION_KEY=your-32-byte-encryption-key-here
